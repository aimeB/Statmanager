<!-- âœ… Conteneur principal -->
<div class="detail-terrain-container" *ngIf="terrain && terrain.terrainJoueurs">




  <!-- âœ… Score affichÃ© en GRAND au centre -->
<div class="score-container">
  <div class="team">
    <img src="assets/france.png" alt="Ã‰quipe Locale" class="team-flag">
    <span class="team-name">HERSTAL FC</span>
  </div>

  <div class="score-box">
    <span class="score">{{ terrain.butEquipe }}</span>
    <span class="score-separator"> - </span>
    <span class="score">{{ terrain.butAdversaire }}</span>
  </div>

  <div class="team">
    <span class="team-name">{{ terrain.nomAdversaire }}</span>
    <img src="assets/adversaire.png" alt="Adversaire" class="team-flag">
    <button class="btn-mini" (click)="mettreAJourButAdversaire(terrain.butAdversaire + 1)">
      âš½
    </button>
  </div>
</div>

<!-- âœ… Historique du match bien alignÃ© en bas -->
<div class="timeline-container">
  <h3 class="timeline-title">ğŸ“œ Match Events</h3>

  <div class="timeline">
    <div *ngFor="let evenement of butsMarques" class="timeline-item">
      <div class="timeline-time">{{ evenement.minute }}'</div>
      <div class="timeline-content">
        <strong>{{ evenement.nomJoueur }}</strong>
        <span class="timeline-icon">{{ evenement.typeEvenement === 'BUT' ? 'âš½' : evenement.typeEvenement === 'ENTRÃ‰E' ? 'ğŸŸ©â¡ï¸' : 'ğŸŸ¥â¬…ï¸' }}</span>
        <span *ngIf="evenement.nomPasseur" class="timeline-passer">ğŸ¯ {{ evenement.nomPasseur }}</span>
      </div>
    </div>
  </div>
</div>







  <!-- âœ… SÃ©lecteur de formation -->
  <div class="formation-selection">
    <mat-form-field appearance="outline">
      <mat-label>Formation</mat-label>
      <mat-select [(value)]="formationActive" (selectionChange)="changerFormation($event)">
        <mat-option *ngFor="let formation of getFormationsDisponibles()" [value]="formation">
          {{ formation }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- âœ… TERRAIN DE JEU -->
  <div class="terrain-grid">
    
    <!-- ğŸ¯ Gardien -->
    <div class="ligne gardien">
      <mat-card class="poste gardien">
        <h4>GB</h4>
        <p>{{ terrainJoueurs['GB']?.nom || 'âŒ Aucun joueur' }}</p>
        <div class="actions">
          <button mat-button color="primary" (click)="ouvrirSelectionJoueur('GB')">?</button>
          <button mat-button color="warn" *ngIf="terrainJoueurs['GB']" (click)="ouvrirSelectionRemplacement(terrainJoueurs['GB']!)">ğŸ”„</button>
          <button mat-button color="accent" (click)="ajouterArretGardien()">ğŸ§¤</button>
          <button mat-button color="primary" (click)="envoyerStatsGardien()">ğŸ“¡</button> 
        </div>
      </mat-card>
    </div>

    <!-- ğŸ¯ DÃ©fense -->
    <div class="ligne defense">
      <mat-card *ngFor="let posteKey of postesFormation.defense" class="poste defenseur">
        <h4>{{ posteKey }}</h4>
        <p>{{ terrainJoueurs[posteKey]?.nom || 'âŒ Aucun joueur' }}</p>
        <div class="actions">
          <button mat-button color="primary" (click)="ouvrirSelectionJoueur(posteKey)">?</button>
          <button mat-button color="warn" *ngIf="terrainJoueurs[posteKey]" (click)="ouvrirSelectionRemplacement(terrainJoueurs[posteKey]!)">ğŸ”„</button>
          <button mat-button color="accent" *ngIf="terrainJoueurs[posteKey] !== null" (click)="incrementerBut($event, terrainJoueurs[posteKey]!)">âš½</button> 

        </div>
      </mat-card>
    </div>

    <!-- ğŸ¯ Milieu de terrain -->
    <div class="ligne milieux">
      <mat-card *ngFor="let posteKey of postesFormation.milieu" class="poste milieux">
        <h4>{{ posteKey }}</h4>
        <p>{{ terrainJoueurs[posteKey]?.nom || 'âŒ Aucun joueur' }}</p>
        <div class="actions">
          <button mat-button color="primary" (click)="ouvrirSelectionJoueur(posteKey)">?</button>
          <button mat-button color="warn" *ngIf="terrainJoueurs[posteKey]" (click)="ouvrirSelectionRemplacement(terrainJoueurs[posteKey]!)">ğŸ”„</button>
          <button mat-button color="accent" *ngIf="terrainJoueurs[posteKey] !== null" (click)="incrementerBut($event, terrainJoueurs[posteKey]!)">âš½</button> 
        </div>
      </mat-card>
    </div>

    <!-- ğŸ¯ Attaque -->
    <div class="ligne attaquants">
      <mat-card *ngFor="let posteKey of postesFormation.attaque" class="poste attaquant">
        <h4>{{ posteKey }}</h4>
        <p>{{ terrainJoueurs[posteKey]?.nom || 'âŒ Aucun joueur' }}</p>
        <div class="actions">
          <button mat-button color="primary" (click)="ouvrirSelectionJoueur(posteKey)">?</button>
          <button mat-button color="warn" *ngIf="terrainJoueurs[posteKey]" (click)="ouvrirSelectionRemplacement(terrainJoueurs[posteKey]!)">ğŸ”„</button>
          <button mat-button color="accent" *ngIf="terrainJoueurs[posteKey] !== null" (click)="incrementerBut($event, terrainJoueurs[posteKey]!)">âš½</button> 
        </div>
      </mat-card>
    </div>

  </div> <!-- âœ… Fin du terrain-grid -->

  <!-- âœ… Bouton RÃ©partition automatique -->
  <button class="btn-repartition" (click)="disposerJoueursNaturellement()">ğŸ”„ RÃ©partir les joueurs automatiquement</button>

</div>
<!-- âœ… Bouton pour ClÃ´turer la Rencontre -->
<div class="cloture-container">
  <button class="btn-cloture" (click)="ouvrirPopupCotes()">ğŸ† ClÃ´turer le match</button>
</div>
